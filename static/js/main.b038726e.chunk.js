(this["webpackJsonpproton-note"]=this["webpackJsonpproton-note"]||[]).push([[0],{127:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(30),i=t.n(o),c=(t(42),t(3)),l=t(6),u=t(7),s=t(21),d=t(35),m=t(4),f=t.n(m),b=t(13),v=function(){var e=Object(b.a)(f.a.mark((function e(){var n,t=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:500,e.abrupt("return",new Promise((function(e,t){setTimeout(e,n)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=Object(b.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){return JSON.parse(localStorage.getItem("NOTES_DB"))||[]},E=function(e){return localStorage.setItem("NOTES_DB",JSON.stringify(e))},w=function(e){return E(h().filter((function(n){return!e(n)})))},N=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t+Math.floor(Number.MAX_SAFE_INTEGER*Math.random()).toString(36);return a.length>=n?a.slice(0,n):e(n,a)};function O(){var e=Object(l.a)(["\n  margin: 0;\n  list-style: none;\n  > li {\n    cursor: pointer;\n    padding: 0.6em;\n\n    &.active {\n      background: CornflowerBlue;\n      color: white;\n    }\n  }\n"]);return O=function(){return e},e}var x=u.a.ul(O());var j=function(e){var n=e.notes,t=void 0===n?[]:n,a=e.selectedNote,o=e.onSelect,i=a&&a.id?a.id:"";return r.a.createElement(x,{className:"notes"},t.map((function(e){return r.a.createElement("li",{key:e.id,onClick:function(){return o(e)},className:e.id===i?"active":""},e.title)})))},k=t(34),S=t.n(k);function y(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  > * {\n    flex-grow: 0;\n  }\n  h1 > input {\n    width: 100%;\n    font-size: inherit;\n  }\n  > section {\n    flex-grow: 1;\n    overflow: auto;\n    textarea {\n      width: 100%;\n      height: 90%;\n      resize: none;\n      box-sizing: border-box;\n    }\n  }\n  > .actions {\n    button {\n      border: none;\n      margin-right: 0.6em;\n      &.right {\n        float: right;\n      }\n      > span[role='img'] {\n        display: block;\n        font-size: 1.3rem;\n      }\n    }\n  }\n"]);return y=function(){return e},e}var C=u.a.div(y());var M=function(e){var n=e.note,t=e.mode,o=e.setMode,i=e.reloadNotes,l=Object(a.useState)(),u=Object(c.a)(l,2),m=u[0],f=u[1],b=Object(a.useState)(!1),v=Object(c.a)(b,2),O=v[0],x=v[1];Object(a.useEffect)((function(){x(!0),f("## Decrypting\nPlease wait..."),n?p(n.content).then((function(e){f(e),x(!1)})):(f(""),x(!1))}),[n]);var j=Object(a.useRef)(null),k={note:n,content:m,setMode:o,reloadNotes:i,save:function(){var e=j.current.querySelector('input[name="title"]').value,t=j.current.querySelector('textarea[name="content"]').value;x(!0),g(t).then((function(t){var a={title:e,content:t};n&&n.id&&(a.id=n.id);var r=function(e){var n,t,a=Object(d.a)(h());return e.id&&(n=a.findIndex((function(n){return n.id===e.id}))),n>=0?(t=Object(s.a)({},a[n],{},e),a[n]=t):(t=Object(s.a)({id:N()},e),a.push(t)),E(a),t}(a);x(!1),i(r)}))},loading:O},y="view"===t?function(e){var n=e.note,t=e.content,a=e.setMode,o=e.reloadNotes,i=e.loading;return{title:n.title,content:r.a.createElement(S.a,{source:t,className:"markdown-body"}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"right",onClick:function(){return a("edit")},disabled:i},r.a.createElement("span",{role:"img","aria-label":"edit"},"\u270f"),"Edit"),r.a.createElement("button",{className:"right",disabled:i,onClick:function(){w((function(e){return e.id===n.id})),o()}},r.a.createElement("span",{role:"img","aria-label":"delete"},"\ud83d\uddd1"),"Delete"))}}(k):function(e){var n=e.note,t=e.content,a=(e.setMode,e.reloadNotes),o=e.save,i=e.loading;return{title:r.a.createElement("input",{name:"title",defaultValue:n?n.title:"Untitled Note",disabled:i}),content:r.a.createElement("textarea",{name:"content",defaultValue:n?t:"",disabled:i}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return a(n)},disabled:i},r.a.createElement("span",{role:"img","aria-label":"cancel"},"\ud83d\udeab"),"Cancel"),r.a.createElement("button",{className:"right",onClick:o,disabled:i},r.a.createElement("span",{role:"img","aria-label":"save"},"\ud83d\udcbe"),"Save"),n?r.a.createElement("button",{className:"right",disabled:i,onClick:function(){w((function(e){return e.id===n.id})),a()}},r.a.createElement("span",{role:"img","aria-label":"delete"},"\ud83d\uddd1"),"Delete"):null)}}(k);return r.a.createElement(C,{className:"viewer",ref:j},r.a.createElement("h1",null,y.title),r.a.createElement("section",null,y.content),r.a.createElement("footer",{className:"actions"},y.actions))};function z(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  > .main {\n    display: flex;\n    height: 100%;\n    overflow: hidden;\n\n    ul.notes {\n      flex-basis: 33%;\n      margin: 0;\n      padding: 0;\n      overflow: auto;\n    }\n\n    div.viewer {\n      padding-left: 1em;\n      flex-basis: 66%;\n    }\n  }\n  > * {\n    padding: 0.6em;\n    box-sizing: border-box;\n  }\n"]);return z=function(){return e},e}var B=u.a.div(z()),D={title:"Welcome to ProtonNote",content:g(" You don't have any notes. You can add a new note by clicking the above 'New note ' button. \n\n>Author: [Leonard Lin](https://github.com/gwokae)\n")};var I=function(){var e=Object(a.useState)("view"),n=Object(c.a)(e,2),t=n[0],o=n[1],i=Object(a.useState)(h()),l=Object(c.a)(i,2),u=l[0],s=l[1],d=Object(a.useState)(u[0]||D),m=Object(c.a)(d,2),f=m[0],b=m[1];return r.a.createElement(B,{className:"App"},r.a.createElement("div",{className:"actions"},r.a.createElement("button",{disabled:"view"!==t,onClick:function(){b(null),o("edit")}},r.a.createElement("span",{role:"img","aria-label":"new note"},"\u2795"),"New note")),r.a.createElement("div",{className:"main"},r.a.createElement(j,{notes:u,selectedNote:f,onSelect:function(e){return b(e)}}),r.a.createElement(M,{note:f,mode:t,setMode:o,reloadNotes:function(e){var n=h();s(n),b(e||n[0]||D),o("view")}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,n,t){e.exports=t(127)},42:function(e,n,t){}},[[37,1,2]]]);
//# sourceMappingURL=main.b038726e.chunk.js.map